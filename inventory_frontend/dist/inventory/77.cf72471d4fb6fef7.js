"use strict";(self.webpackChunkinventory=self.webpackChunkinventory||[]).push([[77],{2077:(Ce,v,a)=>{a.r(v),a.d(v,{AccountingModule:()=>fe});var l=a(6895),x=a(529),T=a(7014),c=a(4006),f=a(7946),e=a(5062),p=a(9111),h=a(7185),g=a(2210),m=a(805),_=a(445),d=a(8396);function C(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"span",9)(2,"p-dropdown",10),e.NdJ("onChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterInvoices(o))})("onClear",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancelFilter())})("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedFilterType=o)}),e.qZA()(),e.TgZ(3,"div",11)(4,"h5"),e._uU(5,"\u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0627\u062c\u0644"),e.qZA(),e.TgZ(6,"h4",12),e._uU(7),e.ALo(8,"number"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("showClear",!0)("options",t.filterTypes)("ngModel",t.selectedFilterType),e.xp6(5),e.hij("",e.Dn7(8,4,t.totalInvoicesFees,"1.0","en-US")," \u062c\u0646\u064a\u0629")}}function Z(n,u){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"\u0627\u0644\u062a\u0627\u0631\u064a\u062e "),e.qZA(),e.TgZ(5,"th"),e._uU(6,"\u0627\u0644\u0633\u0644\u0639 "),e.qZA(),e.TgZ(7,"th"),e._uU(8,"\u0627\u0644\u062f\u0641\u0639\u0627\u062a "),e.qZA(),e.TgZ(9,"th"),e._uU(10," \u0627\u0644\u0645\u0633\u062a\u0644\u0645 / \u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u0627\u0644\u0645\u062e\u0632\u0646"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"\u0627\u0644\u062d\u0627\u0644\u0629"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"\u0645\u0636\u064a\u0641 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"),e.qZA()())}function I(n,u){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.AsE(" ",e.xi3(2,2,t.creationDate,"dd-MM-YYYY")," ",e.xi3(3,5,t.creationDate,"hh:mm a")," ")}}function y(n,u){1&n&&(e.TgZ(0,"span"),e._uU(1," - "),e.qZA())}function F(n,u){1&n&&(e.TgZ(0,"span",23),e._uU(1," \u0645\u0631\u062a\u062c\u0639"),e.qZA())}function b(n,u){1&n&&(e.TgZ(0,"span"),e._uU(1," , "),e.qZA())}function q(n,u){if(1&n&&(e.TgZ(0,"div")(1,"h6",18)(2,"span",19),e._uU(3),e._UZ(4,"br"),e.TgZ(5,"span",20),e._uU(6," \u0639\u062f\u062f \u0627\u0644\u0642\u0637\u0639 x"),e.TgZ(7,"strong"),e._uU(8),e.qZA()(),e._UZ(9,"br"),e.TgZ(10,"span",21),e._uU(11),e.qZA()(),e.YNc(12,F,2,0,"span",22),e.YNc(13,b,2,0,"span",14),e.qZA()()),2&n){const t=u.$implicit,s=u.index,o=e.oxw().$implicit;e.xp6(3),e.AsE("",t.product.productName+" "," ",t.product.manufacturerCountery," "),e.xp6(5),e.Oqu(t.quantity),e.xp6(3),e.hij(" ",t.product.piecePrice," \u062c\u0646\u064a\u0629 \u0644\u0644\u0642\u0637\u0639\u0629"),e.xp6(1),e.Q6J("ngIf",1==t.isReturned),e.xp6(1),e.Q6J("ngIf",s<o.orderItems.length-1)}}function U(n,u){if(1&n&&(e.TgZ(0,"div",24)(1,"div",25)(2,"span",26),e._uU(3),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"strong",21),e._uU(6),e.qZA()()()),2&n){const t=u.$implicit,s=u.index,o=e.oxw().$implicit;e.Q6J("ngClass",s<o.payments.length-1?"invoice-item":""),e.xp6(3),e.hij(" ",e.xi3(4,3,t.addedAt,"dd-MM-YYYY")," "),e.xp6(3),e.hij(" ",t.deposite," \u062c\u0646\u064a\u0629 ")}}function w(n,u){1&n&&(e.TgZ(0,"td")(1,"span",27),e._uU(2,"\u062e\u0627\u0644\u0635\u0629 "),e.qZA()())}function M(n,u){1&n&&(e.TgZ(0,"td")(1,"span",28),e._uU(2,"\u0644\u0645 \u062a\u0646\u062a\u0647\u064a \u0628\u0639\u062f"),e.qZA()())}function S(n,u){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"td",13),e.YNc(5,I,4,8,"span",14),e.YNc(6,y,2,0,"span",14),e.qZA(),e.TgZ(7,"td",15),e.YNc(8,q,14,6,"div",16),e.qZA(),e.TgZ(9,"td",15),e.YNc(10,U,7,6,"div",17),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.YNc(15,w,3,0,"td",14),e.YNc(16,M,3,0,"td",14),e.TgZ(17,"td"),e._uU(18),e.qZA()()),2&n){const t=u.$implicit;e.xp6(3),e.hij(" ",t.invoiceId," "),e.xp6(2),e.Q6J("ngIf",t.creationDate),e.xp6(1),e.Q6J("ngIf",!t.creationDate),e.xp6(2),e.Q6J("ngForOf",t.orderItems),e.xp6(2),e.Q6J("ngForOf",t.payments),e.xp6(2),e.AsE("",t.recievedFees," \u062c\u0646\u064a\u0629 / ",t.totalFees," \u062c\u0646\u064a\u0629 "),e.xp6(2),e.Oqu(t.storage?t.storage.storageName:"\u0627\u0644\u062c\u0645\u064a\u0639"),e.xp6(1),e.Q6J("ngIf",1==t.done),e.xp6(1),e.Q6J("ngIf",0==t.done),e.xp6(2),e.AsE("",t.user.fullName," ","admin"==t.user.type?"\u0627\u062f\u0645\u0646":"\u0643\u0627\u0634\u064a\u0631","")}}function L(n,u){if(1&n&&(e.TgZ(0,"tr")(1,"td",29),e._uU(2," \u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0628\u0639\u062f "),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.uIk("colspan",t.longTermsInvoices.length)}}function O(n,u){if(1&n&&(e.TgZ(0,"div",30),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" \u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a ",t.longTermsInvoices?t.longTermsInvoices.length:0," ")}}let R=(()=>{class n{constructor(t,s){this._inS=t,this.toastr=s,this.longTermsInvoices=[],this.selectedInvoice={},this.numberOfInvoceItems=[],this.selectedFilterType={name:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u064a\u0648\u0645 (\u0645\u0646 \u0627\u0644\u0633\u0627\u0639\u0629  7 \u0635 \u062d\u062a\u0649 \u0627\u0644\u0627\u0646)",value:"today"},this.filterTypes=[{name:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u064a\u0648\u0645 (\u0645\u0646 \u0627\u0644\u0633\u0627\u0639\u0629  7 \u0635 \u062d\u062a\u0649 \u0627\u0644\u0627\u0646)",value:"today"},{name:"\u0627\u062e\u0631 7 \u0627\u064a\u0627\u0645",value:"week"},{name:"\u0627\u062d\u0631 30 \u064a\u0648\u0645",value:"month"},{name:"\u0643\u0644 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631",value:"all"}],this.totalInvoicesFees=0}ngOnInit(){this.getTodayLongTerms()}getAllLongTermsInvoices(){this._inS.getAllLongTerms().subscribe(t=>{"success"==t.status?(this.longTermsInvoices=[],t.companiesInvoices.forEach(s=>{s.invoices.forEach(o=>{this.longTermsInvoices.push(o)})})):this.longTermsInvoices=[],this.totalInvoicesFees=this.countTotalFees(this.longTermsInvoices)})}getTodayLongTerms(){this._inS.getTodayLongTerms().subscribe(t=>{"success"==t.status?(this.longTermsInvoices=[],t.companiesInvoices.forEach(s=>{s.invoices.forEach(o=>{this.longTermsInvoices.push(o)})})):this.longTermsInvoices=[],this.totalInvoicesFees=this.countTotalFees(this.longTermsInvoices)})}getLast7DayLongTerms(){this._inS.getLast7DayLongTerms().subscribe(t=>{"success"==t.status?(this.longTermsInvoices=[],t.companiesInvoices.forEach(s=>{s.invoices.forEach(o=>{this.longTermsInvoices.push(o)})})):this.longTermsInvoices=[],this.totalInvoicesFees=this.countTotalFees(this.longTermsInvoices)})}getLast30LongTerms(){this._inS.getLast30LongTerms().subscribe(t=>{"success"==t.status?(this.longTermsInvoices=[],t.companiesInvoices.forEach(s=>{s.invoices.forEach(o=>{this.longTermsInvoices.push(o)})})):this.longTermsInvoices=[],this.totalInvoicesFees=this.countTotalFees(this.longTermsInvoices)})}filterInvoices(t){null!=t.value?(this.selectedFilterType=t.value,"all"==t.value.value?this.getAllLongTermsInvoices():"today"==t.value.value?this.getTodayLongTerms():"week"==t.value.value?this.getLast7DayLongTerms():"month"==t.value.value?this.getLast30LongTerms():this.getTodayLongTerms()):this.selectedFilterType=""}cancelFilter(){this.getTodayLongTerms(),this.selectedFilterType={name:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u064a\u0648\u0645 (\u0645\u0646 \u0627\u0644\u0633\u0627\u0639\u0629  7 \u0635 \u062d\u062a\u0649 \u0627\u0644\u0627\u0646)",value:"today"}}countTotalFees(t){let s=0;for(let o=0;o<t.length;o++)s+=t[o].recievedFees;return s}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.q),e.Y36(h._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-long-terms-invoices"]],decls:10,vars:4,consts:[[1,"d-flex","flex-row","justify-content-between","page-header"],[1,"my-3"],["dir","rtl","responsiveLayout","scroll",3,"value","paginator","rows","totalRecords"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","summary"],[1,"table-header","row","justify-content-between","align-items-center"],[1,"p-input-icon-left","filter-container","col-md-6"],["appendTo","body","placeholder","\u062a\u0635\u0641\u064a\u0629 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631","optionLabel","name",3,"showClear","options","ngModel","onChange","onClear","ngModelChange"],[1,"total-invoices","col-md-6"],[1,"text-success"],[2,"direction","ltr"],[4,"ngIf"],[2,"max-width","350px"],[4,"ngFor","ngForOf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,""],[1,"badge","badge-warning"],[1,"my-2"],[1,"my-1"],["class","font-italic text-danger",4,"ngIf"],[1,"font-italic","text-danger"],[3,"ngClass"],[1,"d-flex","flex-column"],[1,"my-1",2,"direction","ltr"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"transparent-bkg"],[1,"p-d-flex","p-ai-center","p-jc-between"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"h4"),e._uU(2,"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0627\u062c\u0644"),e.qZA()(),e.TgZ(3,"main",1)(4,"p-table",2),e.YNc(5,C,9,8,"ng-template",3),e.YNc(6,Z,17,0,"ng-template",4),e.YNc(7,S,19,12,"ng-template",5),e.YNc(8,L,3,1,"ng-template",6),e.YNc(9,O,2,1,"ng-template",7),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("value",s.longTermsInvoices)("paginator",!0)("rows",20)("totalRecords",s.longTermsInvoices.length))},dependencies:[l.mk,l.sg,l.O5,g.Lt,m.jx,_.Lv,c.JJ,c.On,d.iA,l.JJ,l.uU],styles:[".page-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-family:TheSans,sans-serif}.item-name[_ngcontent-%COMP%]{font-size:18px}.filter-container[_ngcontent-%COMP%]{width:450px}.total-invoices[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .total-invoices[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-family:TheSans,sans-serif}.invoice-item[_ngcontent-%COMP%]{border-bottom:1px solid #FDDB19;text-align:right}"]}),n})();function Y(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"span",9)(2,"p-dropdown",10),e.NdJ("onChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterInvoices(o))})("onClear",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancelFilter())})("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedFilterType=o)}),e.qZA()(),e.TgZ(3,"div",11)(4,"h5"),e._uU(5,"\u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0631\u062a\u062c\u0639"),e.qZA(),e.TgZ(6,"h4",12),e._uU(7),e.ALo(8,"number"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("showClear",!0)("options",t.filterTypes)("ngModel",t.selectedFilterType),e.xp6(5),e.hij("",e.Dn7(8,4,t.totalInvoicesFees,"1.0","en-US")," \u062c\u0646\u064a\u0629")}}function E(n,u){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"\u0627\u0644\u062a\u0627\u0631\u064a\u062e "),e.qZA(),e.TgZ(5,"th"),e._uU(6,"\u0627\u0644\u0633\u0644\u0639\u0629 "),e.qZA(),e.TgZ(7,"th"),e._uU(8,"\u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0631\u062a\u062c\u0639"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u0627\u0644\u0645\u062e\u0632\u0646"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u0645\u0636\u064a\u0641 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"),e.qZA()())}function N(n,u){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.AsE(" ",e.xi3(2,2,t.returnDate,"dd-MM-YYYY")," ",e.xi3(3,5,t.returnDate,"hh:mm a")," ")}}function J(n,u){1&n&&(e.TgZ(0,"span"),e._uU(1," - "),e.qZA())}function D(n,u){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"td",13),e.YNc(5,N,4,8,"span",14),e.YNc(6,J,2,0,"span",14),e.qZA(),e.TgZ(7,"td")(8,"span",15),e._uU(9),e._UZ(10,"br"),e.TgZ(11,"span",16),e._uU(12," \u0639\u062f\u062f \u0627\u0644\u0642\u0637\u0639 x"),e.TgZ(13,"strong"),e._uU(14),e.qZA()(),e._UZ(15,"br"),e.TgZ(16,"span",17),e._uU(17),e.qZA()()(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.qZA()()),2&n){const t=u.$implicit;e.xp6(3),e.Oqu(t.invoice.invoiceId),e.xp6(2),e.Q6J("ngIf",t.returnDate),e.xp6(1),e.Q6J("ngIf",!t.returnDate),e.xp6(3),e.AsE("",t.product.productName+" "," ",t.product.manufacturerCountery," "),e.xp6(5),e.Oqu(t.quantity),e.xp6(3),e.hij(" ",t.product.piecePrice," \u062c\u0646\u064a\u0629 \u0644\u0644\u0642\u0637\u0639\u0629"),e.xp6(2),e.hij("",t.fee," \u062c\u0646\u064a\u0629 "),e.xp6(2),e.Oqu(t.storage?t.storage.storageName:"\u0627\u0644\u062c\u0645\u064a\u0639"),e.xp6(2),e.AsE("",t.user.fullName," ","admin"==t.user.type?"\u0627\u062f\u0645\u0646":"\u0643\u0627\u0634\u064a\u0631","")}}function j(n,u){if(1&n&&(e.TgZ(0,"tr")(1,"td",18),e._uU(2," \u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0628\u0639\u062f "),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.uIk("colspan",t.returnsInvoices.length)}}function P(n,u){if(1&n&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" \u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a ",t.returnsInvoices?t.returnsInvoices.length:0," ")}}let Q=(()=>{class n{constructor(t,s){this._inS=t,this.toastr=s,this.returnsInvoices=[],this.visibleReturnDialog=!1,this.selectedItemsToReturn=[],this.isAllReturned=[],this.selectedInvoice={},this.numberOfInvoceItems=[],this.selectedFilterType={name:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u064a\u0648\u0645 (\u0645\u0646 \u0627\u0644\u0633\u0627\u0639\u0629  7 \u0635 \u062d\u062a\u0649 \u0627\u0644\u0627\u0646)",value:"today"},this.filterTypes=[{name:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u064a\u0648\u0645 (\u0645\u0646 \u0627\u0644\u0633\u0627\u0639\u0629  7 \u0635 \u062d\u062a\u0649 \u0627\u0644\u0627\u0646)",value:"today"},{name:"\u0627\u062e\u0631 7 \u0627\u064a\u0627\u0645",value:"week"},{name:"\u0627\u062d\u0631 30 \u064a\u0648\u0645",value:"month"},{name:"\u0643\u0644 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631",value:"all"}],this.totalInvoicesFees=0}ngOnInit(){this.getTodayReturns()}getAllReturnsInvoices(){this._inS.getAllReturns().subscribe(t=>{this.returnsInvoices="success"==t.status?t.OrderItems:[],this.totalInvoicesFees=this.countTotalFees(this.returnsInvoices)})}getTodayReturns(){this._inS.getTodayReturns().subscribe(t=>{this.returnsInvoices="success"==t.status?t.OrderItems:[],this.totalInvoicesFees=this.countTotalFees(this.returnsInvoices)})}getLast7DayReturns(){this._inS.getLast7DayReturns().subscribe(t=>{this.returnsInvoices="success"==t.status?t.OrderItems:[],this.totalInvoicesFees=this.countTotalFees(this.returnsInvoices)})}getLast30Returns(){this._inS.getLast30Returns().subscribe(t=>{this.returnsInvoices="success"==t.status?t.OrderItems:[],this.totalInvoicesFees=this.countTotalFees(this.returnsInvoices)})}filterInvoices(t){null!=t.value?(this.selectedFilterType=t.value,"all"==t.value.value?this.getAllReturnsInvoices():"today"==t.value.value?this.getTodayReturns():"week"==t.value.value?this.getLast7DayReturns():"month"==t.value.value?this.getLast30Returns():this.getTodayReturns()):this.selectedFilterType=""}cancelFilter(){this.getTodayReturns(),this.selectedFilterType={name:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u064a\u0648\u0645 (\u0645\u0646 \u0627\u0644\u0633\u0627\u0639\u0629  7 \u0635 \u062d\u062a\u0649 \u0627\u0644\u0627\u0646)",value:"today"}}countTotalFees(t){let s=0;for(let o=0;o<t.length;o++)s+=t[o].fee;return s}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.q),e.Y36(h._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-returns"]],decls:10,vars:4,consts:[[1,"d-flex","flex-row","justify-content-between","page-header"],[1,"my-3"],["dir","rtl","responsiveLayout","scroll",3,"value","paginator","rows","totalRecords"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","summary"],[1,"table-header","row","justify-content-between","align-items-center"],[1,"p-input-icon-left","filter-container","col-md-6"],["appendTo","body","placeholder","\u062a\u0635\u0641\u064a\u0629 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631","optionLabel","name",3,"showClear","options","ngModel","onChange","onClear","ngModelChange"],[1,"total-invoices","col-md-6"],[1,"text-danger"],[2,"direction","ltr"],[4,"ngIf"],[1,"badge","badge-warning"],[1,"my-2"],[1,"my-1"],[1,"transparent-bkg"],[1,"p-d-flex","p-ai-center","p-jc-between"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"h4"),e._uU(2,"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0631\u062a\u062c\u0639\u0627\u062a"),e.qZA()(),e.TgZ(3,"main",1)(4,"p-table",2),e.YNc(5,Y,9,8,"ng-template",3),e.YNc(6,E,13,0,"ng-template",4),e.YNc(7,D,24,11,"ng-template",5),e.YNc(8,j,3,1,"ng-template",6),e.YNc(9,P,2,1,"ng-template",7),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("value",s.returnsInvoices)("paginator",!0)("rows",20)("totalRecords",s.returnsInvoices.length))},dependencies:[l.O5,g.Lt,m.jx,_.Lv,c.JJ,c.On,d.iA,l.JJ,l.uU],styles:[".page-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-family:TheSans,sans-serif}.item-name[_ngcontent-%COMP%]{font-size:18px}.filter-container[_ngcontent-%COMP%]{width:450px}.total-invoices[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .total-invoices[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-family:TheSans,sans-serif}.invoice-item[_ngcontent-%COMP%]{border-bottom:1px solid #FDDB19;text-align:right}"]}),n})();function k(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"span",9)(2,"p-dropdown",10),e.NdJ("onChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterInvoices(o))})("onClear",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancelFilter())})("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedFilterType=o)}),e.qZA()(),e.TgZ(3,"div",11)(4,"h5"),e._uU(5,"\u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0635\u0631\u0641"),e.qZA(),e.TgZ(6,"h4",12),e._uU(7),e.ALo(8,"number"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("showClear",!0)("options",t.filterTypes)("ngModel",t.selectedFilterType),e.xp6(5),e.hij("",e.Dn7(8,4,t.totalInvoicesFees,"1.0","en-US")," \u062c\u0646\u064a\u0629")}}function H(n,u){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 "),e.qZA(),e.TgZ(3,"th"),e._uU(4,"\u0627\u0644\u062a\u0627\u0631\u064a\u062e "),e.qZA(),e.TgZ(5,"th"),e._uU(6,"\u0627\u0644\u0633\u0644\u0639\u0629"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"\u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u0627\u0644\u0645\u062e\u0632\u0646"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0636\u0627\u0641\u0629"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"\u0645\u0636\u064a\u0641 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"),e.qZA()())}function G(n,u){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"td",13),e._uU(5),e.ALo(6,"date"),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"td",14)(9,"h6",15)(10,"span",16),e._uU(11),e._UZ(12,"br"),e.TgZ(13,"span",17),e._uU(14),e.qZA()()()(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA()()),2&n){const t=u.$implicit;e.xp6(3),e.Oqu(t.invoiceId),e.xp6(2),e.AsE(" ",e.xi3(6,11,t.creationDate,"dd-MM-YYYY")," ",e.xi3(7,14,t.creationDate,"hh:mm a"),""),e.xp6(6),e.AsE(" ",t.product.productName+" "," ",t.product.manufacturerCountery," "),e.xp6(3),e.hij(" ",t.product.piecePurchasePrice," \u062c\u0646\u064a\u0629 \u0644\u0644\u0642\u0637\u0639\u0629"),e.xp6(2),e.hij("",t.totalFees," \u062c\u0646\u064a\u0629 "),e.xp6(2),e.Oqu(t.storage?t.storage.storageName:"\u0627\u0644\u062c\u0645\u064a\u0639"),e.xp6(2),e.hij(" ",t.quantity," \u0642\u0637\u0639\u0629 "),e.xp6(2),e.AsE("",t.user.fullName," ","admin"==t.user.type?"\u0627\u062f\u0645\u0646":"\u0643\u0627\u0634\u064a\u0631","")}}function K(n,u){if(1&n&&(e.TgZ(0,"tr")(1,"td",18),e._uU(2," \u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0628\u0639\u062f "),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.uIk("colspan",t.expensesInvoices.length)}}function $(n,u){if(1&n&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" \u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a ",t.expensesInvoices?t.expensesInvoices.length:0," ")}}let z=(()=>{class n{constructor(t){this._inS=t,this.selectedFilterType={name:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u064a\u0648\u0645 (\u0645\u0646 \u0627\u0644\u0633\u0627\u0639\u0629  7 \u0635 \u062d\u062a\u0649 \u0627\u0644\u0627\u0646)",value:"today"},this.filterTypes=[{name:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u064a\u0648\u0645 (\u0645\u0646 \u0627\u0644\u0633\u0627\u0639\u0629  7 \u0635 \u062d\u062a\u0649 \u0627\u0644\u0627\u0646)",value:"today"},{name:"\u0627\u062e\u0631 7 \u0627\u064a\u0627\u0645",value:"week"},{name:"\u0627\u062d\u0631 30 \u064a\u0648\u0645",value:"month"},{name:"\u0643\u0644 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631",value:"all"}],this.expensesInvoices=[],this.totalInvoicesFees=0}ngOnInit(){this.getTodayExpenses()}getAllExpensesInvoices(){this._inS.getAllExpenses().subscribe(t=>{this.expensesInvoices="success"==t.status?t.invoices:[],this.totalInvoicesFees=this.countTotalFees(this.expensesInvoices)})}getTodayExpenses(){this._inS.getTodayExpenses().subscribe(t=>{this.expensesInvoices="success"==t.status?t.invoices:[],this.totalInvoicesFees=this.countTotalFees(this.expensesInvoices)})}getLast7DayExpenses(){this._inS.getLast7DayExpenses().subscribe(t=>{this.expensesInvoices="success"==t.status?t.invoices:[],this.totalInvoicesFees=this.countTotalFees(this.expensesInvoices)})}getLast30Expenses(){this._inS.getLast30Expenses().subscribe(t=>{this.expensesInvoices="success"==t.status?t.invoices:[],this.totalInvoicesFees=this.countTotalFees(this.expensesInvoices)})}filterInvoices(t){null!=t.value?(this.selectedFilterType=t.value,"all"==t.value.value?this.getAllExpensesInvoices():"today"==t.value.value?this.getTodayExpenses():"week"==t.value.value?this.getLast7DayExpenses():"month"==t.value.value?this.getLast30Expenses():this.getTodayExpenses()):this.selectedFilterType=""}cancelFilter(){this.getTodayExpenses(),this.selectedFilterType={name:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u064a\u0648\u0645 (\u0645\u0646 \u0627\u0644\u0633\u0627\u0639\u0629  7 \u0635 \u062d\u062a\u0649 \u0627\u0644\u0627\u0646)",value:"today"}}countTotalFees(t){let s=0;for(let o=0;o<t.length;o++)s+=t[o].totalFees;return s}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-expenses"]],decls:10,vars:4,consts:[[1,"d-flex","flex-row","justify-content-between","page-header"],[1,"my-3"],["dir","rtl","responsiveLayout","scroll",3,"value","paginator","rows","totalRecords"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","summary"],[1,"table-header","row","justify-content-between","align-items-center"],[1,"p-input-icon-left","filter-container","col-md-6"],["appendTo","body","placeholder","\u062a\u0635\u0641\u064a\u0629 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631","optionLabel","name",3,"showClear","options","ngModel","onChange","onClear","ngModelChange"],[1,"total-invoices","col-md-6"],[1,"text-danger"],[2,"direction","ltr"],[2,"max-width","350px"],[1,"item-name"],[1,"badge","badge-warning"],[1,"my-1"],[1,"transparent-bkg"],[1,"p-d-flex","p-ai-center","p-jc-between"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"h4"),e._uU(2,"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0634\u0631\u0627\u0621"),e.qZA()(),e.TgZ(3,"main",1)(4,"p-table",2),e.YNc(5,k,9,8,"ng-template",3),e.YNc(6,H,15,0,"ng-template",4),e.YNc(7,G,23,17,"ng-template",5),e.YNc(8,K,3,1,"ng-template",6),e.YNc(9,$,2,1,"ng-template",7),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("value",s.expensesInvoices)("paginator",!0)("rows",20)("totalRecords",s.expensesInvoices.length))},dependencies:[g.Lt,m.jx,_.Lv,c.JJ,c.On,d.iA,l.JJ,l.uU],styles:[".page-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-family:TheSans,sans-serif}.item-name[_ngcontent-%COMP%]{font-size:18px}.filter-container[_ngcontent-%COMP%]{width:450px}.total-invoices[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .total-invoices[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-family:TheSans,sans-serif}"]}),n})();var A=a(5593),B=a(1493),X=a(1327),W=a(1989);function V(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"span",17)(2,"p-dropdown",18),e.NdJ("onChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.filterInvoices(o))})("onClear",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancelFilter())})("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedFilterType=o)}),e.qZA()(),e.TgZ(3,"div",19)(4,"h5"),e._uU(5,"\u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0628\u064a\u0639"),e.qZA(),e.TgZ(6,"h4",20),e._uU(7),e.ALo(8,"number"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("showClear",!0)("options",t.filterTypes)("ngModel",t.selectedFilterType),e.xp6(5),e.hij("",e.Dn7(8,4,t.totalInvoicesFees,"1.0","en-US")," \u062c\u0646\u064a\u0629")}}function ee(n,u){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 "),e.qZA(),e.TgZ(3,"th"),e._uU(4,"\u0627\u0644\u062a\u0627\u0631\u064a\u062e "),e.qZA(),e.TgZ(5,"th"),e._uU(6,"\u0627\u0644\u0633\u0644\u0639"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"\u0627\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u0627\u0644\u0645\u062e\u0632\u0646 "),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u0627\u0644\u062d\u0627\u0644\u0629"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"\u0645\u0636\u064a\u0641 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"\u0627\u0644\u0627\u062c\u0631\u0627\u0626\u0627\u062a"),e.qZA()())}function te(n,u){1&n&&(e.TgZ(0,"span",31),e._uU(1," \u0645\u0631\u062a\u062c\u0639"),e.qZA())}function ne(n,u){1&n&&(e.TgZ(0,"span"),e._uU(1," , "),e.qZA())}function se(n,u){if(1&n&&(e.TgZ(0,"div")(1,"h6",26)(2,"span",27),e._uU(3),e._UZ(4,"br"),e.TgZ(5,"span",28),e._uU(6," \u0639\u062f\u062f \u0627\u0644\u0642\u0637\u0639 x"),e.TgZ(7,"strong"),e._uU(8),e.qZA()(),e._UZ(9,"br"),e.TgZ(10,"span",29),e._uU(11),e.qZA()(),e.YNc(12,te,2,0,"span",30),e.YNc(13,ne,2,0,"span",23),e.qZA()()),2&n){const t=u.$implicit,s=u.index,o=e.oxw().$implicit;e.xp6(3),e.AsE(" ",t.product.productName+" "," ",t.product.manufacturerCountery," "),e.xp6(5),e.hij("",t.quantity," "),e.xp6(3),e.hij(" ",t.product.piecePrice," \u062c\u0646\u064a\u0629 \u0644\u0644\u0642\u0637\u0639\u0629"),e.xp6(1),e.Q6J("ngIf",1==t.isReturned),e.xp6(1),e.Q6J("ngIf",s<o.orderItems.length-1)}}function ue(n,u){1&n&&(e.TgZ(0,"td")(1,"span",32),e._uU(2,"\u062e\u0627\u0644\u0635\u0629 "),e.qZA()())}function oe(n,u){1&n&&(e.TgZ(0,"td")(1,"span",33),e._uU(2,"\u0644\u0645 \u062a\u0646\u062a\u0647\u064a \u0628\u0639\u062f"),e.qZA()())}function ie(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"td",21),e._uU(5),e.ALo(6,"date"),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"td",22),e.YNc(9,se,14,6,"div",14),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.YNc(14,ue,3,0,"td",23),e.YNc(15,oe,3,0,"td",23),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td",24)(19,"button",25),e.NdJ("click",function(o){const r=e.CHM(t).$implicit,Ae=e.oxw(),xe=e.MAs(11);return Ae.selectedInvoice=r,e.KtG(xe.toggle(o))}),e.qZA()()()}if(2&n){const t=u.$implicit;e.xp6(3),e.Oqu(t.invoiceId),e.xp6(2),e.AsE(" ",e.xi3(6,10,t.creationDate,"dd-MM-YYYY")," ",e.xi3(7,13,t.creationDate,"hh:mm a"),""),e.xp6(4),e.Q6J("ngForOf",t.orderItems),e.xp6(2),e.hij("",t.recievedFees," \u062c\u0646\u064a\u0629 "),e.xp6(2),e.Oqu(t.storage?t.storage.storageName:"\u0627\u0644\u062c\u0645\u064a\u0639"),e.xp6(1),e.Q6J("ngIf",1==t.done),e.xp6(1),e.Q6J("ngIf",0==t.done),e.xp6(2),e.AsE("",t.user.fullName," ","admin"==t.user.type?"\u0627\u062f\u0645\u0646":"\u0643\u0627\u0634\u064a\u0631","")}}function ae(n,u){if(1&n&&(e.TgZ(0,"tr")(1,"td",34),e._uU(2," \u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0628\u0639\u062f "),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.uIk("colspan",t.salesInvoices.length)}}function le(n,u){if(1&n&&(e.TgZ(0,"div",35),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" \u0627\u0644\u0627\u062c\u0645\u0627\u0644\u064a ",t.salesInvoices?t.salesInvoices.length:0," ")}}function ce(n,u){1&n&&(e.TgZ(0,"h4",36),e._uU(1," \u0627\u062e\u062a\u0627\u0631 \u0627\u0644\u0639\u0646\u0627\u0635\u0631 \u0627\u0644\u0645\u0631\u0627\u062f \u0627\u0633\u062a\u0631\u062c\u0627\u0639\u0647\u0627"),e.qZA())}function re(n,u){1&n&&(e.TgZ(0,"h4",36),e._uU(1," \u0644\u0627 \u062a\u0648\u062c\u062f \u0639\u0646\u0627\u0635\u0631 \u0627\u0648 \u062c\u0645\u064a\u0639 \u0627\u0644\u0639\u0646\u0627\u0635\u0631 \u062a\u0645 \u0627\u0633\u062a\u0631\u062c\u0627\u0639\u0647\u0627 \u0645\u0633\u0628\u0642\u0627"),e.qZA())}function pe(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div",38)(1,"p-checkbox",39),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw().index,r=e.oxw();return e.KtG(r.numberOfInvoceItems[i]=o)})("onChange",function(o){e.CHM(t);const i=e.oxw().index,r=e.oxw();return e.KtG(r.onSelectInvoiceItem(o,i))}),e.qZA(),e.TgZ(2,"div",40)(3,"h6"),e._uU(4),e.qZA(),e.TgZ(5,"h6"),e._uU(6),e.qZA(),e.TgZ(7,"h6"),e._uU(8),e.qZA()()()}if(2&n){const t=e.oxw(),s=t.$implicit,o=t.index,i=e.oxw();e.xp6(1),e.Q6J("value",s)("ngModel",i.numberOfInvoceItems[o]),e.xp6(3),e.Oqu(s.product.productName+" "+s.product.manufacturerCountery),e.xp6(2),e.hij("\u0627\u0644\u0643\u0645\u064a\u0629 : ",s.quantity,""),e.xp6(2),e.hij("\u0627\u0644\u0633\u0639\u0631 : ",s.fee," \u062c\u0646\u064a\u0629")}}function ge(n,u){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,pe,9,5,"div",37),e.qZA()),2&n){const t=u.$implicit;e.xp6(1),e.Q6J("ngIf",0==t.isReturned)}}function me(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"p-button",42),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.returnItems())}),e.qZA()}}function _e(n,u){if(1&n&&e.YNc(0,me,1,0,"p-button",41),2&n){const t=e.oxw();e.Q6J("ngIf",t.isAllReturned.length)}}const de=function(){return{width:"50vw"}},he=[{path:"",redirectTo:"sales",pathMatch:"full"},{path:"expenses",component:z},{path:"sales",component:(()=>{class n{constructor(t,s){this._inS=t,this.toastr=s,this.salesInvoices=[],this.visibleReturnDialog=!1,this.selectedItemsToReturn=[],this.isAllReturned=[],this.actionList=[],this.selectedInvoice={},this.numberOfInvoceItems=[],this.selectedFilterType={name:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u064a\u0648\u0645 (\u0645\u0646 \u0627\u0644\u0633\u0627\u0639\u0629  7 \u0635 \u062d\u062a\u0649 \u0627\u0644\u0627\u0646)",value:"today"},this.filterTypes=[{name:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u064a\u0648\u0645 (\u0645\u0646 \u0627\u0644\u0633\u0627\u0639\u0629  7 \u0635 \u062d\u062a\u0649 \u0627\u0644\u0627\u0646)",value:"today"},{name:"\u0627\u062e\u0631 7 \u0627\u064a\u0627\u0645",value:"week"},{name:"\u0627\u062d\u0631 30 \u064a\u0648\u0645",value:"month"},{name:"\u0643\u0644 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631",value:"all"}],this.totalInvoicesFees=0}ngOnInit(){this.getTodaySales(),this.actionList=[{label:"\u0627\u0644\u0627\u062c\u0631\u0627\u0626\u0627\u062a",items:[{label:" \u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0639\u0646\u0627\u0635\u0631 ",icon:"fa-solid fa-rotate-right",command:()=>{this.showReturnItemsDialog()}}]}]}getAllSalesInvoices(){this._inS.getAllSales().subscribe(t=>{this.salesInvoices="success"==t.status?t.invoices:[],this.totalInvoicesFees=this.countTotalFees(this.salesInvoices)})}getTodaySales(){this._inS.getTodaySales().subscribe(t=>{this.salesInvoices="success"==t.status?t.invoices:[],this.totalInvoicesFees=this.countTotalFees(this.salesInvoices)})}getLast7DaySales(){this._inS.getLast7DaySales().subscribe(t=>{this.salesInvoices="success"==t.status?t.invoices:[],this.totalInvoicesFees=this.countTotalFees(this.salesInvoices)})}getLast30Sales(){this._inS.getLast30Sales().subscribe(t=>{this.salesInvoices="success"==t.status?t.invoices:[],this.totalInvoicesFees=this.countTotalFees(this.salesInvoices)})}filterInvoices(t){null!=t.value?(this.selectedFilterType=t.value,"all"==t.value.value?this.getAllSalesInvoices():"today"==t.value.value?this.getTodaySales():"week"==t.value.value?this.getLast7DaySales():"month"==t.value.value?this.getLast30Sales():this.getTodaySales()):this.selectedFilterType=""}cancelFilter(){this.getTodaySales(),this.selectedFilterType={name:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u064a\u0648\u0645 (\u0645\u0646 \u0627\u0644\u0633\u0627\u0639\u0629  7 \u0635 \u062d\u062a\u0649 \u0627\u0644\u0627\u0646)",value:"today"}}countTotalFees(t){let s=0;for(let o=0;o<t.length;o++)s+=t[o].recievedFees;return s}showReturnItemsDialog(){this.visibleReturnDialog=!0,this.selectedItemsToReturn=[],this.numberOfInvoceItems=[],this.isAllReturned=[],this.selectedInvoice.orderItems.forEach(t=>{this.numberOfInvoceItems.push(!1)}),this.isAllReturned=this.selectedInvoice.orderItems.filter(t=>0==t.isReturned)}onSelectInvoiceItem(t,s){t.checked&&t.checked.length?this.selectedItemsToReturn.push(t.checked[0]):this.selectedItemsToReturn.splice(s,1)}returnItems(){if(this.selectedItemsToReturn.length)for(let t=0;t<this.selectedItemsToReturn.length;t++)t==this.selectedItemsToReturn.length-1?this._inS.returnItemsFromInvoice(this.selectedItemsToReturn[t].orderItemId,"revenue").subscribe(s=>{"success"==s.status?(this.visibleReturnDialog=!1,this.toastr.success(s.message,"\u062a\u0645 \u0627\u0644\u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0628\u0646\u062c\u0627\u062d"),setTimeout(()=>{"all"==this.selectedFilterType?this.getAllSalesInvoices():"today"==this.selectedFilterType?this.getTodaySales():"week"==this.selectedFilterType?this.getLast7DaySales():"month"==this.selectedFilterType?this.getLast30Sales():this.getTodaySales()},500)):this.toastr.error(s.message,this.selectedItemsToReturn[t].product.productName+" "+this.selectedItemsToReturn[t].product.manufacturerCountery)}):this._inS.returnItemsFromInvoice(this.selectedItemsToReturn[t].orderItemId,"revenue").subscribe(s=>{"success"==s.status||this.toastr.error(s.message,this.selectedItemsToReturn[t].product.productName+" "+this.selectedItemsToReturn[t].product.manufacturerCountery)});else this.toastr.error("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0627\u062e\u062a\u0631 \u0639\u0646\u0627\u0635\u0631 \u0644\u0627\u0633\u062a\u0631\u062c\u0627\u0639\u0647\u0627")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.q),e.Y36(h._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sales"]],decls:21,vars:21,consts:[[1,"d-flex","flex-row","justify-content-between","page-header"],[1,"my-3"],["dir","rtl","responsiveLayout","scroll",3,"value","paginator","rows","totalRecords"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","summary"],["appendTo","body",3,"popup","model"],["menu",""],[3,"dismissableMask","header","visible","modal","draggable","visibleChange"],[1,""],[1,"d-flex","text-right","mb-4"],["class","d-flex text-right",4,"ngIf"],[4,"ngFor","ngForOf"],["pTemplate","footer"],[1,"table-header","row","justify-content-between","align-items-center"],[1,"p-input-icon-left","filter-container","col-md-6"],["appendTo","body","placeholder","\u062a\u0635\u0641\u064a\u0629 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631","optionLabel","name",3,"showClear","options","ngModel","onChange","onClear","ngModelChange"],[1,"total-invoices","col-md-6"],[1,"text-success"],[2,"direction","ltr"],[2,"max-width","350px"],[4,"ngIf"],[1,"actions-cell"],["type","button","pButton","","icon","pi pi-bars","label","",3,"click"],[1,"item-name"],[1,"badge","badge-warning"],[1,"my-2"],[1,"my-1"],["class","font-italic text-danger",4,"ngIf"],[1,"font-italic","text-danger"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"transparent-bkg"],[1,"p-d-flex","p-ai-center","p-jc-between"],[1,"d-flex","text-right"],["class","d-flex flex-row py-3 invoice-item ",4,"ngIf"],[1,"d-flex","flex-row","py-3","invoice-item"],["styleClass","ml-2","name","invoiceItems",3,"value","ngModel","ngModelChange","onChange"],[1,"d-flex","flex-column"],["icon","pi pi-check","label","\u0627\u0633\u062a\u0631\u062c\u0627\u0639","styleClass","p-button-text",3,"click",4,"ngIf"],["icon","pi pi-check","label","\u0627\u0633\u062a\u0631\u062c\u0627\u0639","styleClass","p-button-text",3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"h4"),e._uU(2,"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a"),e.qZA()(),e.TgZ(3,"main",1)(4,"p-table",2),e.YNc(5,V,9,8,"ng-template",3),e.YNc(6,ee,17,0,"ng-template",4),e.YNc(7,ie,20,16,"ng-template",5),e.YNc(8,ae,3,1,"ng-template",6),e.YNc(9,le,2,1,"ng-template",7),e.qZA(),e._UZ(10,"p-menu",8,9),e.qZA(),e.TgZ(12,"p-dialog",10),e.NdJ("visibleChange",function(i){return s.visibleReturnDialog=i}),e.TgZ(13,"div",11)(14,"h6",12),e._uU(15),e.ALo(16,"date"),e.qZA(),e.YNc(17,ce,2,0,"h4",13),e.YNc(18,re,2,0,"h4",13),e.YNc(19,ge,2,1,"div",14),e.qZA(),e.YNc(20,_e,1,1,"ng-template",15),e.qZA()),2&t&&(e.xp6(4),e.Q6J("value",s.salesInvoices)("paginator",!0)("rows",20)("totalRecords",s.salesInvoices.length),e.xp6(6),e.Q6J("popup",!0)("model",s.actionList),e.xp6(2),e.Akn(e.DdM(20,de)),e.Q6J("dismissableMask",!0)("header","\u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0639\u0646\u0627\u0635\u0631 \u0645\u0646 \u0641\u0627\u062a\u0648\u0631\u0629 "+s.selectedInvoice.invoiceId)("visible",s.visibleReturnDialog)("modal",!0)("draggable",!1),e.xp6(3),e.hij(" ",e.xi3(16,17,s.selectedInvoice.creationDate,"dd-MM-YYYY"),""),e.xp6(2),e.Q6J("ngIf",s.isAllReturned.length),e.xp6(1),e.Q6J("ngIf",!s.isAllReturned.length),e.xp6(1),e.Q6J("ngForOf",s.selectedInvoice.orderItems))},dependencies:[l.sg,l.O5,A.Hq,A.zx,g.Lt,m.jx,_.Lv,c.JJ,c.On,d.iA,B.V,X.v2,W.XZ,l.JJ,l.uU],styles:[".page-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-family:TheSans,sans-serif}.item-name[_ngcontent-%COMP%]{font-size:18px}.filter-container[_ngcontent-%COMP%]{width:450px}.total-invoices[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .total-invoices[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-family:TheSans,sans-serif}.invoice-item[_ngcontent-%COMP%]{border-bottom:1px solid #FDDB19;text-align:right}"]}),n})()},{path:"returns",component:Q},{path:"long-terms-invoices",component:R}];let ve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.Bz.forChild(he),f.Bz]}),n})();var Te=a(5601);let fe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[l.ez,T.g,ve,c.UX,Te.m,x.JF,l.ez,T.g]}),n})()}}]);